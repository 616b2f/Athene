<div *ngIf="items$ | async as items; else loading">
    <div *ngIf="!items">
		<br>
		<br>
        <h3><small>"Nothing found"</small></h3>
    </div>
    <div *ngFor="let item of items">
        <div>
			<div class="card card-default card-body mb-3">
				<div class="media">
					<!-- <img class="ml-5" src="{{item.imageUrl}}" style="width:150px;height:150px"> -->
					<!-- <img class="mr-5" src="data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2264%22%20height%3D%2264%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2064%2064%22%20preserveAspectRatio%3D%22none%22%3E%3Cdefs%3E%3Cstyle%20type%3D%22text%2Fcss%22%3E%23holder_171d1dda3ff%20text%20%7B%20fill%3Argba(255%2C255%2C255%2C.75)%3Bfont-weight%3Anormal%3Bfont-family%3AHelvetica%2C%20monospace%3Bfont-size%3A10pt%20%7D%20%3C%2Fstyle%3E%3C%2Fdefs%3E%3Cg%20id%3D%22holder_171d1dda3ff%22%3E%3Crect%20width%3D%2264%22%20height%3D%2264%22%20fill%3D%22%23777%22%3E%3C%2Frect%3E%3Cg%3E%3Ctext%20x%3D%2212.546875%22%20y%3D%2236.5%22%3E64x64%3C%2Ftext%3E%3C%2Fg%3E%3C%2Fg%3E%3C%2Fsvg%3E" style="width:150px;height:200px"> -->
					<svg class="mr-5" width="150" height="200" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid slice" focusable="false" role="img" aria-label="Placeholder: Image"><title>Placeholder</title><rect width="100%" height="100%" fill="#868e96"></rect><text x="35%" y="50%" fill="#dee2e6" dy=".3em">Image</text></svg>
					<div class="media-body"> 
						<div class="row">
							<div class="col-md-12">
								<dl class="row">
									<dt class="col-sm-2">Title</dt>
									<dd class="col-sm-10">{{item.title}}</dd>
								</dl>
							</div>
							<div class="col-md-12">
								<div *ngIf="item.description; else nodescription">
									<dl class="row">
										<dt class="col-sm-2">Description</dt>
										<dd class="col-sm-10">{{item.description}}</dd>
									</dl>
								</div>
								<ng-template #nodescription>
									<label>-</label>
								</ng-template>
							</div>
							<div class="col-md-12">
								<dl class="row">
									<dt class="col-sm-2">Authors</dt>
									<dd class="col-sm-10">
										<div *ngIf="item.authors && item.authors.length > 0; else noauthors">
											<div *ngFor="let author of item.authors">
												<span>
													{{author.fullName}}
												</span>
											</div>
										</div>
									</dd>
								</dl>
								<ng-template #noauthors>
									<label>Not Available</label>
								</ng-template>
							</div>
							<div class="col-md-12">
								<img src="/assets/icons/tag-fill.svg" alt="" width="16" height="16">
								<div *ngIf="item.categories && item.categories.length > 0; else nocategories">
									<div *ngFor="let category of item.categories">
										<span class="label label-default">
											#{{category.name}}
										</span>
									</div>
								</div>
								<ng-template #nocategories>
									<label>-</label>
								</ng-template>
							</div>
							<div class="col-md-12">
								<dl class="row">
									<dt class="col-sm-2">Inventory <span class="badge badge-light">{{item.inventoryItems.length}}</span></dt>
									<dd class="col-sm-10">
										<strong>Borrowed: </strong><span class="badge badge-light">{{borrowedCount(item.inventoryItems)}}</span>
										<strong> Not borrowed: </strong><span class="badge badge-light">{{notBorrowedCount(item.inventoryItems)}}</span>
									</dd>
								</dl>
								<!-- <div *ngIf="item.inventoryItems && item.inventoryItems.length > 0; else noinvitems">
									<div *ngFor="let invItem of item.inventoryItems">
										{{invItem.id}}
										{{invItem.stockLocation}}
									</div>
								</div>
								<ng-template #noinvitems>
									<label>Not Available</label>
								</ng-template> -->
								<!-- @if (Model.InventoryItems.Count > 0)
								{
									// @foreach (var invItem in Model.InventoryItems)
									// {
									//     @Html.Partial("_InventoryItemPreview", invItem)
									// }
								}
								else
								{
									<label>@Localizer["Not Available"]</label>
								} -->
							</div>
						</div>
					</div>
				</div>
			</div>

        </div>
    </div>
</div>

<ng-template #loading>
  ... loading
</ng-template>
